{{template "base" .}}

{{define "content"}}
<div class="auth-page" style="margin-top:0;min-height:100vh">
  <div class="auth-card" style="max-width:480px">
    <div class="auth-logo">
      <div style="font-size:2.5rem;margin-bottom:.5rem">ğŸ“§</div>
      <div class="auth-logo-text">{{.SiteName}}</div>
    </div>

    {{with .Data}}
    {{if index . "Verified"}}
    <h2 class="auth-title" style="color:#16a34a">é‚®ç®±éªŒè¯æˆåŠŸ</h2>
    {{if $.Flash}}
    <div class="flash flash-ok">{{$.Flash}}</div>
    {{end}}
    <p style="text-align:center;color:var(--text2);font-size:.92rem;margin-bottom:1.5rem">
      æ‚¨çš„é‚®ç®±å·²éªŒè¯ï¼Œè´¦å·å·²æ¿€æ´»ã€‚
    </p>
    <a class="btn btn-primary" href="/profile" style="width:100%;justify-content:center">å‰å¾€ä¸ªäººèµ„æ–™</a>
    {{else}}
    <h2 class="auth-title">éªŒè¯æ‚¨çš„é‚®ç®±</h2>

    {{if $.Flash}}
    <div class="flash {{if $.IsError}}flash-err{{else}}flash-ok{{end}}">{{$.Flash}}</div>
    {{end}}

    {{if not $.IsError}}
    <p style="text-align:center;color:var(--text2);font-size:.92rem;margin-bottom:1.5rem;line-height:1.7">
      æˆ‘ä»¬å·²å‘
      {{if index . "Email"}}<strong>{{index . "Email"}}</strong>{{else}}æ‚¨çš„é‚®ç®±{{end}}
      å‘é€äº†ä¸€å°éªŒè¯é‚®ä»¶ï¼Œè¯·ç‚¹å‡»é‚®ä»¶ä¸­çš„é“¾æ¥å®ŒæˆéªŒè¯ã€‚
    </p>
    <p style="text-align:center;color:#94a3b8;font-size:.82rem;margin-bottom:1.5rem">
      æ²¡æœ‰æ”¶åˆ°é‚®ä»¶ï¼Ÿè¯·æ£€æŸ¥åƒåœ¾é‚®ä»¶æ–‡ä»¶å¤¹ï¼Œæˆ–ç‚¹å‡»ä¸‹æ–¹é‡æ–°å‘é€ã€‚
    </p>
    {{end}}

    <details style="margin-bottom:1rem">
      <summary style="font-size:.88rem;color:var(--text2);cursor:pointer;padding:.5rem 0;user-select:none">
        é‡æ–°å‘é€éªŒè¯é‚®ä»¶
      </summary>
      <form method="POST" action="/verify-email/resend" style="margin-top:.8rem">
        <input type="hidden" name="csrf_token" value="{{$.CSRFToken}}">
        <div class="form-group">
          <label class="form-label">æ³¨å†Œé‚®ç®±</label>
          <input class="form-control" type="email" name="email"
            value="{{index . "Email"}}" placeholder="you@example.com" required>
        </div>
        <button class="btn btn-ghost btn-sm" type="submit">é‡æ–°å‘é€</button>
      </form>
    </details>

    <p class="auth-footer-link"><a href="/login">è¿”å›ç™»å½•</a></p>
    {{end}}
    {{end}}
  </div>
</div>
{{end}}
