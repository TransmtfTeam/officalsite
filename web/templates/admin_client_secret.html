{{template "base" .}}

{{define "content"}}
<div class="panel-wrap">
  <aside class="sidebar">
    <div class="sidebar-section">
      <div class="sidebar-title">管理导航</div>
      {{if .CurrentUser.IsAdmin}}
      <a class="sidebar-link" href="/admin">概览</a>
      <a class="sidebar-link" href="/admin/users">用户</a>
      {{end}}
      <a class="sidebar-link" href="/admin/groups">分组</a>
      <a class="sidebar-link active" href="/admin/clients">应用</a>
      {{if .CurrentUser.IsAdmin}}
      <a class="sidebar-link" href="/admin/providers">登录方式</a>
      <a class="sidebar-link" href="/admin/roles">角色</a>
      <a class="sidebar-link" href="/admin/announcements">公告</a>
      <a class="sidebar-link" href="/admin/settings">设置</a>
      {{end}}
    </div>
    <div class="sidebar-section">
      <div class="sidebar-title">快速入口</div>
      <a class="sidebar-link" href="/">返回首页</a>
      <a class="sidebar-link" href="/profile">个人资料</a>
    </div>
  </aside>

  <main class="panel-content">
    {{with .Data}}
    {{$client := index . "Client"}}

    <div style="display:flex;align-items:center;gap:.8rem;margin-bottom:.5rem">
      <a href="/admin/clients/{{$client.ID}}" style="color:var(--text2);font-size:.9rem">← 返回详情</a>
    </div>
    <h1 class="panel-title">Client Secret 已重置</h1>

    {{if $.Flash}}
    <div class="flash {{if $.IsError}}flash-err{{else}}flash-ok{{end}}">{{$.Flash}}</div>
    {{end}}

    <div class="secret-box">
      <p style="font-weight:600;margin-bottom:.6rem">⚠️ 新 Client Secret（仅显示一次，请立即复制保存）</p>
      <div class="detail-row" style="margin-bottom:.6rem">
        <div class="detail-key">Client ID</div>
        <div class="detail-val mono">{{$client.ClientID}}</div>
      </div>
      <div class="secret-val">{{index . "NewSecret"}}</div>
    </div>

    <p style="font-size:.85rem;color:var(--text2);margin-top:1rem">
      旧 Secret 已立即失效。所有使用旧 Secret 的应用需要更新配置。
    </p>

    <div style="margin-top:1.5rem">
      <a class="btn btn-primary" href="/admin/clients/{{$client.ID}}">返回应用详情</a>
    </div>

    {{end}}
  </main>
</div>
{{end}}
