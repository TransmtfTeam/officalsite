{{template "base" .}}

{{define "content"}}
<div class="panel-wrap">
  <aside class="sidebar">
    <div class="sidebar-section">
      <div class="sidebar-title">管理导航</div>
      <a class="sidebar-link active" href="/admin">概览</a>
      <a class="sidebar-link" href="/admin/users">用户</a>
      <a class="sidebar-link" href="/admin/clients">应用</a>
      <a class="sidebar-link" href="/admin/providers">登录方式</a>
      <a class="sidebar-link" href="/admin/settings">设置</a>
    </div>
    <div class="sidebar-section">
      <div class="sidebar-title">快速入口</div>
      <a class="sidebar-link" href="/">返回首页</a>
      <a class="sidebar-link" href="/profile">个人资料</a>
    </div>
  </aside>

  <main class="panel-content">
    <h1 class="panel-title">管理面板</h1>
    <p class="panel-sub">查看平台核心指标并快速进入管理模块。</p>

    {{if .Flash}}
    <div class="flash {{if .IsError}}flash-err{{else}}flash-ok{{end}}">{{.Flash}}</div>
    {{end}}

    {{with .Data}}
    <div class="stats-row">
      <div class="stat-card">
        <div class="stat-num">{{index . "Users"}}</div>
        <div class="stat-label">用户总数</div>
      </div>
      <div class="stat-card">
        <div class="stat-num">{{index . "Clients"}}</div>
        <div class="stat-label">OIDC 应用</div>
      </div>
      <div class="stat-card">
        <div class="stat-num">{{index . "Providers"}}</div>
        <div class="stat-label">外部登录方式</div>
      </div>
      <div class="stat-card">
        <div class="stat-num">{{index . "Projects"}}</div>
        <div class="stat-label">团队项目</div>
      </div>
    </div>
    {{end}}

    <div class="cards-grid">
      <div class="info-card">
        <div class="info-card-title">用户管理</div>
        <div class="info-card-body">创建用户、调整角色、启停账户。</div>
        <a class="btn btn-ghost btn-sm" href="/admin/users" style="margin-top:1rem">进入</a>
      </div>
      <div class="info-card">
        <div class="info-card-title">OIDC 应用</div>
        <div class="info-card-body">维护 OAuth2/OIDC 客户端与回调地址。</div>
        <a class="btn btn-ghost btn-sm" href="/admin/clients" style="margin-top:1rem">进入</a>
      </div>
      <div class="info-card">
        <div class="info-card-title">外部登录</div>
        <div class="info-card-body">配置 X、Google、Keycloak 等外部 OIDC 登录。</div>
        <a class="btn btn-ghost btn-sm" href="/admin/providers" style="margin-top:1rem">进入</a>
      </div>
      <div class="info-card">
        <div class="info-card-title">站点设置</div>
        <div class="info-card-body">维护网站名称、公告、条款与隐私政策。</div>
        <a class="btn btn-ghost btn-sm" href="/admin/settings" style="margin-top:1rem">进入</a>
      </div>
    </div>
  </main>
</div>
{{end}}
