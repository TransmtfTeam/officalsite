{{template "base" .}}

{{define "content"}}
<div class="panel-wrap">
  <aside class="sidebar">
    <div class="sidebar-section">
      <div class="sidebar-title">管理导航</div>
      <a class="sidebar-link" href="/admin">概览</a>
      <a class="sidebar-link" href="/admin/users">用户</a>
      <a class="sidebar-link" href="/admin/clients">应用</a>
      <a class="sidebar-link" href="/admin/providers">登录方式</a>
      <a class="sidebar-link active" href="/admin/settings">设置</a>
    </div>
    <div class="sidebar-section">
      <div class="sidebar-title">快速入口</div>
      <a class="sidebar-link" href="/">返回首页</a>
    </div>
  </aside>

  <main class="panel-content">
    <h1 class="panel-title">站点设置</h1>
    <p class="panel-sub">维护站点名称、公告和法律文本。</p>

    {{if .Flash}}
    <div class="flash {{if .IsError}}flash-err{{else}}flash-ok{{end}}">{{.Flash}}</div>
    {{end}}

    <form method="POST" action="/admin/settings">
      <input type="hidden" name="csrf_token" value="{{$.CSRFToken}}">

      <div class="form-panel">
        <p class="form-panel-title">基础设置</p>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">站点名称</label>
            <input class="form-control" type="text" name="site_name" value="{{with .Data}}{{index . "site_name"}}{{end}}" placeholder="Team TransMTF">
          </div>
          <div class="form-group">
            <label class="form-label">联系邮箱</label>
            <input class="form-control" type="email" name="contact_email" value="{{with .Data}}{{index . "contact_email"}}{{end}}" placeholder="contact@transmtf.com">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">中文公告</label>
            <textarea class="form-control" name="ann_zh" rows="2" placeholder="站点公告...">{{with .Data}}{{index . "ann_zh"}}{{end}}</textarea>
          </div>
          <div class="form-group">
            <label class="form-label">English Announcement</label>
            <textarea class="form-control" name="ann_en" rows="2" placeholder="Site announcement...">{{with .Data}}{{index . "ann_en"}}{{end}}</textarea>
          </div>
        </div>
      </div>

      <div class="form-panel">
        <p class="form-panel-title">法律文本（支持 HTML）</p>
        <div class="form-group">
          <label class="form-label">服务条款内容（/tos）</label>
          <textarea class="form-control" name="tos_content" rows="8" placeholder="请输入服务条款内容...">{{with .Data}}{{index . "tos_content"}}{{end}}</textarea>
        </div>
        <div class="form-group">
          <label class="form-label">隐私政策内容（/privacy）</label>
          <textarea class="form-control" name="privacy_content" rows="8" placeholder="请输入隐私政策内容...">{{with .Data}}{{index . "privacy_content"}}{{end}}</textarea>
        </div>
      </div>

      <button class="btn btn-primary" type="submit">保存设置</button>
    </form>
  </main>
</div>
{{end}}
